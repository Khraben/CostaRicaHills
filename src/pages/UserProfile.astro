---
// UserProfile.astro
import Layout from "../layouts/Layout.astro";
import UserProfileReservas from "../components/UserProfileReservas.jsx";
---
<Layout title="Perfil de Usuario - Costa Rica Hills">
  <section class="user-profile-section">
    <div class="user-profile-container">
      <div class="user-profile">
        <h1>Perfil del Usuario</h1>
        <img src='src/assets/userDefault.jpg' alt="Foto de Usuario" class="profile-photo" />
        <p class="user-name">Nombre: </p>
        <p class="user-email">Bienvenido</p>
      </div>
    </div>
    <UserProfileReservas client:load />
  </section>
</Layout>

<script>
  import { listenForAuthChanges } from "../components/auth";
  if (typeof window !== 'undefined') {
    window.addEventListener('DOMContentLoaded', () => {
      listenForAuthChanges();
      let userName = localStorage.getItem('userName') || '';
      let userPhotoUrl = localStorage.getItem('userPhotoUrl') || 'src/assets/userDefault.jpg';
      document.querySelector('.user-name').textContent = `Nombre: ${userName}`;
      document.querySelector('.profile-photo').src = userPhotoUrl;

      window.addEventListener('storage', () => {
        userName = localStorage.getItem('userName') || '';
        userPhotoUrl = localStorage.getItem('userPhotoUrl') || 'src/assets/userDefault.jpg';
        document.querySelector('.user-name').textContent = `Nombre: ${userName}`;
        document.querySelector('.profile-photo').src = userPhotoUrl;
      });
    });
  }
</script>
<style>
  .user-profile-section {
    padding: 2rem;
    background-color: transparent;
    margin-top: 4rem;
  }
  .user-profile-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .user-profile {
    background: linear-gradient(135deg, #f0f0f0, #ffffff);
    padding: 2rem;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    text-align: center;
    max-width: 500px;
    width: 100%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .user-profile:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }
  .profile-photo {
    height: 120px;
    width: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #00a08b;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .profile-photo:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
  }
  .user-name {
    margin: 1rem 0;
    color: #333;
  }
  .user-name {
    font-size: 1.75rem;
    font-weight: bold;
  }
</style>